window.__require=function t(e,n,r){function o(a,c){if(!n[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!c&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){return o(e[a][1][t]||t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<r.length;a++)o(r[a]);return o}({CardData:[function(t,e,n){"use strict";cc._RF.push(e,"3baf8oiNKtLVpoL8t4gKaZC","CardData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],CardSliceData:[function(t,e,n){"use strict";cc._RF.push(e,"32e04u19FFMuKXUDdWQBFq9","CardSliceData");var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,o++)r[o]=i[a];return r};Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Pattern"),i=function(){function t(t){this.pattern=null,this.cards=null!==t&&void 0!==t?t:[]}return Object.defineProperty(t.prototype,"cards",{get:function(){return r(this.pattern.patternCardIndices)},set:function(t){this.pattern=new o.default(t)},enumerable:!1,configurable:!0}),t}();n.default=i,cc._RF.pop()},{"./Pattern":"Pattern"}],CardSlice:[function(t,e,n){"use strict";cc._RF.push(e,"e9175VOBZRBGJYK7iR0Hoq8","CardSlice");var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,o++)r[o]=i[a];return r};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Data/Card/CardSliceData"),c=t("../Table/Table"),s=cc._decorator,u=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardSprites=[],e.pattern=null,e.patternLabel=null,e.currentCardSliceData=null,e}return r(e,t),e.prototype.setCardSlice=function(t){var e=this;this.currentCardSliceData=new a.default(i(t)),this.adjustDisplayCardNumber(t.length),this.pattern.active=!0,this.patternLabel.string=this.currentCardSliceData.pattern.patternName,this.currentCardSliceData.cards.forEach(function(t,n){e.cardSprites[n].spriteFrame=c.default.converCardIndexToSpriteFrame(t)})},e.prototype.reset=function(){this.currentCardSliceData=null,this.pattern.active=!1,this.cardSprites.forEach(function(t){t.spriteFrame=null})},e.prototype.adjustDisplayCardNumber=function(t){this.cardSprites.forEach(function(e,n){e.node.active=n<t})},o([l([cc.Sprite])],e.prototype,"cardSprites",void 0),o([l(cc.Node)],e.prototype,"pattern",void 0),o([l(cc.Label)],e.prototype,"patternLabel",void 0),e=o([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../Data/Card/CardSliceData":"CardSliceData","../Table/Table":"Table"}],Card:[function(t,e,n){"use strict";cc._RF.push(e,"e5d0d1lIxdCxpHhI3zJZffU","Card");var r,o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.Spade=0]="Spade",t[t.Heart=1]="Heart",t[t.dismond=2]="dismond",t[t.club=3]="club"}(r||(r={}));var i=function(){function t(t){this._cardIndex=-1,this._cardInfo=null,"number"==typeof t?this.cardIndex=t:this.cardInfo=t}return Object.defineProperty(t.prototype,"cardIndex",{get:function(){return this._cardIndex},set:function(e){this._cardIndex=e,this._cardInfo=t.converToCardInfo(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cardInfo",{set:function(e){this._cardInfo=o({},e),this._cardIndex=t.converToCardIndex(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"points",{get:function(){return this._cardInfo.points},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"suit",{get:function(){return this._cardInfo.suit},enumerable:!1,configurable:!0}),t.converToCardIndex=function(t){return 13===t.points&&(t.points=0),13*t.suit+t.points},t.converToCardInfo=function(t){return{suit:Math.trunc(t/13),points:t%13||13}},t.compareCallback=function(t,e){if(t.points>e.points)return 1;if(t.points<e.points)return-1;if(t.suit<e.suit)return 1;if(t.suit>e.suit)return-1;throw Error("WTF same card?")},t}();n.default=i,cc._RF.pop()},{}],Connection:[function(t,e,n){"use strict";cc._RF.push(e,"858adWniNZDaLZ5b07clImM","Connection");var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.Path=void 0;var i,a=t("./NetworkWebSocket"),c=cc._decorator.ccclass;(function(t){t.JoinLobby="join.lobby",t.ExitLobby="exit.lobby",t.JoinRoom="join.room",t.ExitRoom="exit.room",t.SetCard="set.card",t.LocationMessage="LocationMsg",t.RoomMessage="RoomMsg",t.CardMessage="CardMsg"})(i=n.Path||(n.Path={}));var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.netWork=null,e.dataDispatcher={},e}return r(e,t),e.prototype.onLoad=function(){for(var t=prompt("Enter the server address");!t;)t=prompt("Enter the server address");this.netWork=new a.default("wss://"+t,this.parseResponseData.bind(this))},e.prototype.waitForOpen=function(){return this.netWork.waitForOpen()},e.prototype.joinLobby=function(t){this.netWork.request(i.JoinLobby,{Name:t})},e.prototype.exitLobby=function(){this.netWork.request(i.ExitLobby)},e.prototype.joinRoom=function(t){this.netWork.request(i.JoinRoom,{Name:t})},e.prototype.exitRoom=function(){this.netWork.request(i.ExitRoom)},e.prototype.setCard=function(t){this.netWork.request(i.SetCard,{Cards:t})},e.prototype.getLocationData=function(){var t=this;return new Promise(function(e){t.dataDispatcher[i.LocationMessage]=e})},e.prototype.getRoomData=function(){var t=this;return new Promise(function(e){t.dataDispatcher[i.RoomMessage]=e})},e.prototype.getCardData=function(){var t=this;return new Promise(function(e){t.dataDispatcher[i.CardMessage]=e})},e.prototype.parseResponseData=function(t){var e,n;this.node.emit(t.Type,t),null===(n=(e=this.dataDispatcher)[t.Type])||void 0===n||n.call(e,t),console.log(t.Type,t)},e=o([c],e)}(cc.Component);n.default=s,cc._RF.pop()},{"./NetworkWebSocket":"NetworkWebSocket"}],Delay:[function(t,e,n){"use strict";cc._RF.push(e,"3db2fM87hxHOp/rXZygKnkh","Delay"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return new Promise(function(e){return setTimeout(e,t)})},cc._RF.pop()},{}],Draft:[function(t,e,n){"use strict";cc._RF.push(e,"bb5ceBUNLVA3I2mGHcuDOVa","Draft");var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?n(t.value):o(t.value).then(a,c)}s((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,o++)r[o]=i[a];return r};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Card/CardSlice"),u=t("../Data/Card/Card"),l=t("../GameObject/MessageBar"),p=t("../GameObject/Timer"),f=t("../Utility/Delay"),d=t("./Table"),h=cc._decorator,y=h.ccclass,b=h.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allCardSprites=[],e.cardSlices=[],e.messageBar=null,e.timer=null,e.blockInputEventNode=null,e.cards=[],e.pickedCards=[],e.onPickedTween=cc.tween().by(.1,{y:50}),e.onUnPickedTween=cc.tween().by(.1,{y:-50}),e}return r(e,t),e.prototype.onLoad=function(){var t=this;this.allCardSprites.map(function(t){return t.node}).forEach(function(e,n){e.on(cc.Node.EventType.MOUSE_UP,function(e){var r=t.pickedCards.findIndex(function(t){return t.positionIndex===n}),o=e.getButton();o===cc.Event.EventMouse.BUTTON_LEFT&&-1===r&&t.pickedCards.length<5?t.chooseCard(n):o===cc.Event.EventMouse.BUTTON_RIGHT&&-1!==r&&t.unchoosedCard(r)})}),this.cardSlices.forEach(function(e,n){e.node.on(cc.Node.EventType.MOUSE_UP,function(r){var o=r.getButton();if(o!==cc.Event.EventMouse.BUTTON_LEFT||e.currentCardSliceData)o===cc.Event.EventMouse.BUTTON_RIGHT&&e.currentCardSliceData&&(t.toggleCardSpritesVisibility(e.currentCardSliceData.cards,!0),e.reset());else{if(t.pickedCards.length!==(n?5:3))return;e.setCardSlice(t.pickedCards.map(function(t){return t.cardIndex})),t.toggleCardSpritesVisibility(t.pickedCards.map(function(t){return t.cardIndex}),!1),t.pickedCards.length=0}})})},e.prototype.startDrafting=function(t){return i(this,void 0,Promise,function(){var e,n=this;return a(this,function(r){switch(r.label){case 0:return this.node.active=!0,this.cards=t.map(function(t){return new u.default(t)}).sort(u.default.compareCallback),this.allCardSprites.forEach(function(t,e){t.spriteFrame=d.default.converCardIndexToSpriteFrame(n.cards[e].cardIndex)}),[4,this.timer.startCountDown(25)];case 1:return r.sent(),this.messageBar.show("Times Up!"),e=this.check(),[4,f.default(2e3)];case 2:return r.sent(),this.reset(),[2,e]}})})},e.prototype.reset=function(){this.node.active=!1,this.blockInputEventNode.active=!1,this.pickedCards.length=0,this.allCardSprites.forEach(function(t){t.spriteFrame=null,t.node.active=!0,t.node.y=0}),this.cardSlices.forEach(function(t){return t.reset()})},e.prototype.check=function(){this.blockInputEventNode.active=!0;var t=this.cardSlices.filter(function(t){return t.currentCardSliceData}).map(function(t){return t.currentCardSliceData.cards}).reduce(function(t,e){return c(t,e)},[]),e=this.cards.map(function(t){return t.cardIndex}).filter(function(e){return!t.find(function(t){return t===e})});return this.cardSlices.forEach(function(t,n){t.currentCardSliceData||t.setCardSlice(e.splice(0,n?5:3))}),this.allCardSprites.forEach(function(t){t.node.active=!1}),this.cardSlices.map(function(t){return t.currentCardSliceData.cards}).reduce(function(t,e){return c(t,e)},[])},e.prototype.toggleCardSpritesVisibility=function(t,e){var n=this;t.forEach(function(t){var r=n.cards.findIndex(function(e){return t===e.cardIndex});n.allCardSprites[r].node.active=e,n.allCardSprites[r].node.y=0})},e.prototype.chooseCard=function(t){this.onPickedTween.clone(this.allCardSprites[t].node).start(),this.pickedCards.push({positionIndex:t,cardIndex:this.cards[t].cardIndex})},e.prototype.unchoosedCard=function(t){this.onUnPickedTween.clone(this.allCardSprites[this.pickedCards[t].positionIndex].node).start(),this.pickedCards.splice(t,1)},o([b([cc.Sprite])],e.prototype,"allCardSprites",void 0),o([b([s.default])],e.prototype,"cardSlices",void 0),o([b(l.default)],e.prototype,"messageBar",void 0),o([b(p.default)],e.prototype,"timer",void 0),o([b(cc.Node)],e.prototype,"blockInputEventNode",void 0),e=o([y],e)}(cc.Component);n.default=v,cc._RF.pop()},{"../Card/CardSlice":"CardSlice","../Data/Card/Card":"Card","../GameObject/MessageBar":"MessageBar","../GameObject/Timer":"Timer","../Utility/Delay":"Delay","./Table":"Table"}],InputDialog:[function(t,e,n){"use strict";cc._RF.push(e,"1a463zEB0FF/JQh0Qbw+Jom","InputDialog");var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?n(t.value):o(t.value).then(a,c)}s((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,u=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.userInput=null,e.confirmBtn=null,e.cancelBtn=null,e.cancelSymbol=Symbol("Cancel"),e.resultResolve=null,e}return r(e,t),e.prototype.onLoad=function(){var t,e=this;null===(t=this.cancelBtn)||void 0===t||t.on(cc.Node.EventType.TOUCH_END,function(){e.cancelAction()}),this.confirmBtn.on(cc.Node.EventType.TOUCH_END,function(){e.confirmAction(e.userInput.string)})},e.prototype.waitForAction=function(){return i(this,void 0,Promise,function(){var t=this;return a(this,function(e){return this.node.active=!0,[2,new Promise(function(e){t.resultResolve=e})]})})},e.prototype.confirmAction=function(t){this.resultResolve(t),this.close()},e.prototype.cancelAction=function(){this.resultResolve(this.cancelSymbol),this.close()},e.prototype.close=function(){this.node.active=!1,this.userInput.string=""},o([u(cc.EditBox)],e.prototype,"userInput",void 0),o([u(cc.Node)],e.prototype,"confirmBtn",void 0),o([u(cc.Node)],e.prototype,"cancelBtn",void 0),e=o([s],e)}(cc.Component);n.default=l,cc._RF.pop()},{}],Lobby:[function(t,e,n){"use strict";cc._RF.push(e,"cca79k9MWtD/LoeZQqHmKyl","Lobby");var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?n(t.value):o(t.value).then(a,c)}s((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./Connection/Connection"),s=t("./Data/Connection/LocationData"),u=t("./GameObject/MessageBar"),l=t("./LoginPanel"),p=t("./RoomPanel"),f=t("./Table/Table"),d=cc._decorator,h=d.ccclass,y=d.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loginPanel=null,e.roomPanel=null,e.table=null,e.connection=null,e.messageBar=null,e.isLogin=!1,e.userName="",e}return r(e,t),e.prototype.start=function(){return i(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return[4,this.connection.waitForOpen()];case 1:return e.sent(),[4,this.login()];case 2:return e.sent()?[4,this.chooseRoom()]:[3,9];case 3:return"string"!=typeof e.sent()?[3,8]:[4,this.connection.getLocationData()];case 4:return(t=e.sent()).Location!==s.Location.Room?[3,6]:[4,this.enterRoom(t.Name)];case 5:return e.sent(),[3,7];case 6:this.messageBar.show("\u6b64\u623f\u904a\u6232\u9032\u884c\u4e2d\uff0c\u8acb\u7a0d\u5f8c\u518d\u9032\u5165"),e.label=7;case 7:return[3,9];case 8:this.isLogin=!1,this.userName="",e.label=9;case 9:return[3,0];case 10:return[2]}})})},e.prototype.login=function(){return i(this,void 0,Promise,function(){var t;return a(this,function(e){switch(e.label){case 0:return this.isLogin?[3,4]:[4,this.loginPanel.waitForAction()];case 1:return"string"!=typeof(t=e.sent())?[3,3]:[4,this.connection.getLocationData()];case 2:return e.sent().Location!==s.Location.Lobby?(this.messageBar.show("\u767b\u5165\u5931\u6557"),[2,!1]):(this.userName=t,this.isLogin=!0,[3,4]);case 3:return this.userName="",[2,!1];case 4:return[2,!0]}})})},e.prototype.chooseRoom=function(){return this.roomPanel.waitForAction()},e.prototype.enterRoom=function(t){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.node.active=!1,[4,this.table.gameLoop(this.userName,t)];case 1:return e.sent(),this.node.active=!0,[2]}})})},o([y(l.default)],e.prototype,"loginPanel",void 0),o([y(p.default)],e.prototype,"roomPanel",void 0),o([y(f.default)],e.prototype,"table",void 0),o([y(c.default)],e.prototype,"connection",void 0),o([y(u.default)],e.prototype,"messageBar",void 0),e=o([h],e)}(cc.Component);n.default=b,cc._RF.pop()},{"./Connection/Connection":"Connection","./Data/Connection/LocationData":"LocationData","./GameObject/MessageBar":"MessageBar","./LoginPanel":"LoginPanel","./RoomPanel":"RoomPanel","./Table/Table":"Table"}],LocationData:[function(t,e,n){"use strict";cc._RF.push(e,"ccee6nRXTdC2oPUzyP3Vf5O","LocationData"),Object.defineProperty(n,"__esModule",{value:!0}),n.Location=void 0,function(t){t[t.Logout=0]="Logout",t[t.Lobby=1]="Lobby",t[t.Room=2]="Room"}(n.Location||(n.Location={})),cc._RF.pop()},{}],LoginPanel:[function(t,e,n){"use strict";cc._RF.push(e,"6673bkbgHpG14S9wgvVeG7A","LoginPanel");var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./Connection/Connection"),a=t("./GameObject/InputDialog"),c=cc._decorator,s=c.ccclass,u=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.connection=null,e}return r(e,t),e.prototype.confirmAction=function(e){e?(this.connection.joinLobby(e),t.prototype.confirmAction.call(this,e)):alert("Name can't be empty!")},e.prototype.cancelAction=function(){console.log(this.node.name+" cancel")},o([u(i.default)],e.prototype,"connection",void 0),e=o([s],e)}(a.default);n.default=l,cc._RF.pop()},{"./Connection/Connection":"Connection","./GameObject/InputDialog":"InputDialog"}],MessageBar:[function(t,e,n){"use strict";cc._RF.push(e,"fb801StylZMEb0A2vp21DKf","MessageBar");var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.message=null,e.showTween=cc.tween().to(.5,{scale:1}).delay(1).to(.5,{scale:.1}).call(function(){return e.reset()}),e.currentRunningTween=null,e}return r(e,t),e.prototype.show=function(t){this.reset(),this.node.active=!0,this.message.string=t,this.currentRunningTween=this.showTween.clone(this.node).start()},e.prototype.display=function(t){this.reset(),this.node.active=!0,this.node.scale=1,this.message.string=t},e.prototype.reset=function(){var t;this.node.active=!1,this.node.scale=.1,null===(t=this.currentRunningTween)||void 0===t||t.stop(),this.currentRunningTween=null},o([c(cc.Label)],e.prototype,"message",void 0),e=o([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],NetworkWebSocket:[function(t,e,n){"use strict";cc._RF.push(e,"31af97dBTtHgp+DQ26HxfN7","NetworkWebSocket");var r=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?n(t.value):o(t.value).then(a,c)}s((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){var n=this;this.webSocket=null,this.openPromise=null,this.openResolve=null,this.response=null,this.webSocket=new WebSocket(t),this.openPromise=new Promise(function(t){n.openResolve=t}),this.response=e,this.webSocket.onopen=this.onOpen.bind(this),this.webSocket.onmessage=this.onMessage.bind(this),this.webSocket.onerror=this.onError.bind(this),this.webSocket.onclose=this.onClose.bind(this)}return t.prototype.request=function(t,e){return r(this,void 0,Promise,function(){return o(this,function(n){switch(n.label){case 0:return[4,this.waitForOpen()];case 1:return n.sent(),this.webSocket.send(JSON.stringify(Object.assign(e||{},{Type:t}))),[2]}})})},t.prototype.waitForOpen=function(){return this.openPromise},t.prototype.onOpen=function(t){console.log("Server connected",t),this.openResolve()},t.prototype.onMessage=function(t){this.response(JSON.parse(t.data))},t.prototype.onError=function(){console.log("Connection close upexpectedly")},t.prototype.onClose=function(t){console.log("Server disconnected",t.reason)},t}();n.default=i,cc._RF.pop()},{}],Pattern:[function(t,e,n){"use strict";cc._RF.push(e,"03983gKB6NHcYJ1X5n+MWM8","Pattern");var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,o++)r[o]=i[a];return r};Object.defineProperty(n,"__esModule",{value:!0}),n.CardPatternName=void 0;var o,i,a=t("./Card");(function(t){t.Separate="Separate",t.OnePair="OnePair",t.TwoPair="TwoPair",t.ThreeOfKind="ThreeOfKind",t.Straight="Straight",t.Flush="Flush",t.FullHouse="FullHouse",t.FourOfKind="FourOfKind",t.StraightFlush="StraightFlush"})(o=n.CardPatternName||(n.CardPatternName={})),function(t){t[t.Separate=0]="Separate",t[t.OnePair=1]="OnePair",t[t.TwoPair=2]="TwoPair",t[t.ThreeOfKind=3]="ThreeOfKind",t[t.Straight=4]="Straight",t[t.Flush=5]="Flush",t[t.FullHouse=6]="FullHouse",t[t.FourOfKind=7]="FourOfKind",t[t.StraightFlush=8]="StraightFlush"}(i||(i={}));var c=function(){function t(t){this.cards=[],this.isFlush=!1,this.isStraight=!1,this.fourOfKind=null,this.threeOfKind=null,this.minorPair=null,this.majorPair=null,this.separate=[],this.patternName=null,this.patternWight=null,this.patternCardIndices=null,this.cards=r(t).map(function(t){return new a.default(t)}),this.classify(),this.match()}return t.prototype.classify=function(){var t=this;this.cards.sort(a.default.compareCallback),this.isFlush=this.cards.every(function(e){return e.suit===t.cards[0].suit})&&5===this.cards.length,this.isStraight=this.cards.every(function(e,n){return!n||e.points===t.cards[n-1].points+1})&&5===this.cards.length;for(var e=function(e){var r=n.cards.filter(function(n){return n.points===t.cards[e].points});switch(r.length){case 4:n.fourOfKind=r;break;case 3:n.threeOfKind=r;break;case 2:n.minorPair?n.minorPair[0].points!==n.cards[e].points&&(n.majorPair=r):n.minorPair=r;break;case 1:n.separate.push(n.cards[e]);break;default:console.error("WTF")}},n=this,r=0;r<this.cards.length;r++)e(r)},t.prototype.match=function(){var t=this;this.isFlush&&this.isStraight?(this.patternName=o.StraightFlush,this.patternCardIndices=this.cards.map(function(t){return t.cardIndex})):this.fourOfKind?(this.patternName=o.FourOfKind,this.patternCardIndices=r(this.fourOfKind.map(function(t){return t.cardIndex}),this.separate.map(function(t){return t.cardIndex}))):this.threeOfKind&&this.minorPair?(this.patternName=o.FullHouse,this.patternCardIndices=r(this.threeOfKind.map(function(t){return t.cardIndex}),this.minorPair.map(function(t){return t.cardIndex}))):this.isFlush?(this.patternName=o.Flush,this.patternCardIndices=this.cards.map(function(t){return t.cardIndex})):this.isStraight?(this.patternName=o.Straight,this.patternCardIndices=this.cards.map(function(t){return t.cardIndex})):this.threeOfKind?(this.patternName=o.ThreeOfKind,this.patternCardIndices=r(this.threeOfKind.map(function(t){return t.cardIndex}),this.separate.map(function(t){return t.cardIndex}))):this.minorPair&&this.majorPair?(this.patternName=o.TwoPair,this.patternCardIndices=r(this.majorPair.map(function(t){return t.cardIndex}),this.minorPair.map(function(t){return t.cardIndex}),this.separate.map(function(t){return t.cardIndex}))):this.minorPair?(this.patternName=o.OnePair,this.patternCardIndices=r(this.minorPair.map(function(t){return t.cardIndex}),this.separate.map(function(t){return t.cardIndex}))):(this.patternName=o.Separate,this.patternCardIndices=this.cards.map(function(t){return t.cardIndex})),this.patternWight=i[Object.entries(o).find(function(e){return e[1]===t.patternName})[0]]},t.compare=function(t,e){if(t.patternWight>e.patternWight)return 1;if(t.patternWight<e.patternWight)return-1;var n=t.cards.length;switch(t.patternWight){case i.StraightFlush:return t.cards[n-1].points>e.cards[n-1].points?1:t.cards[n-1].points<e.cards[n-1].points?-1:0;case i.FourOfKind:return t.fourOfKind[0].points>e.fourOfKind[0].points?1:t.fourOfKind[0].points<e.fourOfKind[0].points?-1:t.separate[0].points>e.separate[0].points?1:t.separate[0].points<e.separate[0].points?-1:0;case i.FullHouse:return t.fourOfKind[0].points>e.fourOfKind[0].points?1:t.fourOfKind[0].points<e.fourOfKind[0].points?-1:t.minorPair[0].points>e.minorPair[0].points?1:t.minorPair[0].points<e.minorPair[0].points?-1:0;case i.Flush:for(var r=t.cards.length-1;r>=0;r--){if(t.cards[r].points>e.cards[r].points)return 1;if(t.cards[r].points<e.cards[r].points)return-1}return 0;case i.Straight:return t.cards[n-1].points>e.cards[n-1].points?1:t.cards[n-1].points<e.cards[n-1].points?-1:0;case i.ThreeOfKind:if(t.threeOfKind[0].points>e.threeOfKind[0].points)return 1;if(t.threeOfKind[0].points<e.threeOfKind[0].points)return-1;for(r=t.separate.length-1;r>=0;r--){if(t.separate[r].points>e.separate[r].points)return 1;if(t.separate[r].points<e.separate[r].points)return-1}return 0;case i.TwoPair:if(t.minorPair[0].points>e.minorPair[0].points)return 1;if(t.minorPair[0].points<e.minorPair[0].points)return-1;if(t.majorPair[0].points>e.majorPair[0].points)return 1;if(t.majorPair[0].points<e.majorPair[0].points)return-1;for(r=t.separate.length-1;r>=0;r--){if(t.separate[r].points>e.separate[r].points)return 1;if(t.separate[r].points<e.separate[r].points)return-1}return 0;case i.OnePair:if(t.minorPair[0].points>e.minorPair[0].points)return 1;if(t.minorPair[0].points<e.minorPair[0].points)return-1;for(r=t.separate.length-1;r>=0;r--){if(t.separate[r].points>e.separate[r].points)return 1;if(t.separate[r].points<e.separate[r].points)return-1}return 0;case i.Separate:for(r=t.cards.length-1;r>=0;r--){if(t.cards[r].points>e.cards[r].points)return 1;if(t.cards[r].points<e.cards[r].points)return-1}return 0;default:throw Error("Unknown card pattern")}},t}();n.default=c,cc._RF.pop()},{"./Card":"Card"}],RoomData:[function(t,e,n){"use strict";cc._RF.push(e,"da7f9C60lNHH48F+nc9ljka","RoomData"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],RoomPanel:[function(t,e,n){"use strict";cc._RF.push(e,"ad67azLuDpNTZvSHUeX5aFe","RoomPanel");var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=t("./Connection/Connection"),a=t("./GameObject/InputDialog"),c=cc._decorator,s=c.ccclass,u=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.connection=null,e.contentNode=null,e.roomOptionPrefab=null,e.currentRoomData=null,e}return r(e,t),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),this.connection.node.on(i.Path.RoomMessage,function(t){e.updateRooms(t)})},e.prototype.confirmAction=function(e){e?(this.connection.joinRoom(e),t.prototype.confirmAction.call(this,e)):alert("Name can't be empty!")},e.prototype.cancelAction=function(){this.connection.exitLobby(),t.prototype.cancelAction.call(this)},e.prototype.updateRooms=function(t){var e=this,n=t.Rooms.length;this.currentRoomData=t,t.Rooms.forEach(function(t,n){var r=null;n<e.contentNode.children.length?(r=e.contentNode.children[n]).active=!0:((r=cc.instantiate(e.roomOptionPrefab)).parent=e.contentNode,r.on(cc.Node.EventType.TOUCH_END,function(){e.confirmAction(e.currentRoomData.Rooms[n].Name)}));var o=r.getComponentsInChildren(cc.Label);o[0].string=t.Name,o[1].string=""+t.Players.filter(function(t){return""!==t}).length}),this.contentNode.children.slice(n).forEach(function(t){t.active=!1}),this.contentNode.height=30*n},o([u(i.default)],e.prototype,"connection",void 0),o([u(cc.Node)],e.prototype,"contentNode",void 0),o([u(cc.Prefab)],e.prototype,"roomOptionPrefab",void 0),e=o([s],e)}(a.default);n.default=l,cc._RF.pop()},{"./Connection/Connection":"Connection","./GameObject/InputDialog":"InputDialog"}],ShowCard:[function(t,e,n){"use strict";cc._RF.push(e,"18c7dBg+ctM37aWWV78a3Nm","ShowCard");var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?n(t.value):o(t.value).then(a,c)}s((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Card/CardSlice"),s=t("../Data/Card/Pattern"),u=t("../GameObject/MessageBar"),l=t("../Utility/Delay"),p=cc._decorator,f=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.messageBar=null,e.cardSlices=[],e.winResultLabels=[],e}return r(e,t),e.prototype.show=function(t,e){return i(this,void 0,void 0,function(){var n,r=this;return a(this,function(o){switch(o.label){case 0:return n=t.Cards.splice(e,1)[0],t.Cards.unshift(n),this.messageBar.show("\u982d"),t.Cards.forEach(function(t,e){r.cardSlices[e].setCardSlice(t.slice(0,3)),r.showWinResult(e)}),[4,l.default(3500)];case 1:return o.sent(),this.messageBar.show("\u4e8c\u9053"),t.Cards.forEach(function(t,e){r.cardSlices[e].setCardSlice(t.slice(3,8)),r.showWinResult(e)}),[4,l.default(3500)];case 2:return o.sent(),this.messageBar.show("\u5c3e"),t.Cards.forEach(function(t,e){r.cardSlices[e].setCardSlice(t.slice(8,13)),r.showWinResult(e)}),[4,l.default(3500)];case 3:return o.sent(),this.reset(),[2]}})})},e.prototype.reset=function(){this.cardSlices.forEach(function(t){return t.reset()}),this.winResultLabels.forEach(function(t){t.string=""})},e.prototype.showWinResult=function(t){if(t){var e=s.default.compare(this.cardSlices[0].currentCardSliceData.pattern,this.cardSlices[t].currentCardSliceData.pattern);this.winResultLabels[t-1].string=1===e?"\u8d0f":-1===e?"\u8f38":"\u548c"}},o([d(u.default)],e.prototype,"messageBar",void 0),o([d([c.default])],e.prototype,"cardSlices",void 0),o([d(cc.Label)],e.prototype,"winResultLabels",void 0),e=o([f],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../Card/CardSlice":"CardSlice","../Data/Card/Pattern":"Pattern","../GameObject/MessageBar":"MessageBar","../Utility/Delay":"Delay"}],Table:[function(t,e,n){"use strict";cc._RF.push(e,"d8833gZYy5A3K9y4Pdw7jRl","Table");var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},i=this&&this.__awaiter||function(t,e,n,r){function o(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?n(t.value):o(t.value).then(a,c)}s((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,o++)r[o]=i[a];return r};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Connection/Connection"),u=t("../GameObject/MessageBar"),l=t("../Utility/Delay"),p=t("./Draft"),f=t("./ShowCard"),d=cc._decorator,h=d.ccclass,y=d.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.connection=null,e.draft=null,e.showCard=null,e.cardSpriteAtlas=null,e.roomNameLabel=null,e.messageBar=null,e.backBtn=null,e.userNames=[],e.backResolve=null,e.currentRoomData=null,e.currentCardData=null,e}var n;return r(e,t),n=e,e.prototype.onLoad=function(){var t=this;n.cardSpriteAtlas=this.cardSpriteAtlas,this.connection.node.on(s.Path.RoomMessage,function(e){t.currentRoomData=e.Rooms.find(function(e){return e.Name===t.roomNameLabel.string}),t.currentRoomData&&t.updatePlayerName(t.currentRoomData.Players)}),this.connection.node.on(s.Path.CardMessage,function(e){t.currentCardData=e}),this.backBtn.on(cc.Node.EventType.TOUCH_END,function(){t.backResolve()})},e.converCardIndexToSpriteFrame=function(t){return this.cardSpriteAtlas.getSpriteFrame(""+(t+1))},e.prototype.gameLoop=function(t,e){return i(this,void 0,void 0,function(){var n=this;return a(this,function(r){switch(r.label){case 0:return[4,Promise.race([new Promise(function(t){n.backResolve=t}),i(n,void 0,void 0,function(){var n,r,o,i,c,s,u,p;return a(this,function(a){switch(a.label){case 0:this.node.active=!0,this.roomNameLabel.string=e,this.userNames[0].string=t,this.messageBar.display("\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u9032\u623f"),a.label=1;case 1:return[4,this.connection.getRoomData()];case 2:n=a.sent(),this.currentRoomData=n.Rooms.find(function(t){return t.Name===e}),a.label=3;case 3:return 4!==(null===(p=this.currentRoomData)||void 0===p?void 0:p.Players.filter(function(t){return""!==t}).length)?[3,11]:(this.messageBar.show("\u56de\u5408\u5373\u5c07\u958b\u59cb"),r=this,[4,this.connection.getCardData()]);case 4:return r.currentCardData=a.sent(),this.backBtn.active=!1,o=this.currentRoomData.Players.findIndex(function(e){return e===t}),c=(i=this.connection).setCard,[4,this.draft.startDrafting(this.currentCardData.Cards[o])];case 5:c.apply(i,[a.sent()]),s=!1,a.label=6;case 6:return s?[3,8]:(u=this,[4,this.connection.getCardData()]);case 7:return u.currentCardData=a.sent(),s=this.currentCardData.Cards.every(function(t){return t.every(function(t){return-1!==t})}),[3,6];case 8:return this.backBtn.active=!0,[4,this.showCard.show(this.currentCardData,o)];case 9:return a.sent(),[4,l.default(500)];case 10:return a.sent(),[3,3];case 11:return[3,1];case 12:return[2]}})})])];case 1:return r.sent(),this.reset(),[2]}})})},e.prototype.reset=function(){this.node.active=!1,this.roomNameLabel.string="",this.messageBar.reset(),this.userNames.forEach(function(t){t.string=""}),this.connection.exitRoom()},e.prototype.updatePlayerName=function(t){var e=this,n=c(t);n.splice(n.indexOf(this.userNames[0].string),1),n.forEach(function(t,n){e.userNames[n+1].string=t})},e.cardSpriteAtlas=null,o([y(s.default)],e.prototype,"connection",void 0),o([y(p.default)],e.prototype,"draft",void 0),o([y(f.default)],e.prototype,"showCard",void 0),o([y(cc.SpriteAtlas)],e.prototype,"cardSpriteAtlas",void 0),o([y(cc.Label)],e.prototype,"roomNameLabel",void 0),o([y(u.default)],e.prototype,"messageBar",void 0),o([y(cc.Node)],e.prototype,"backBtn",void 0),o([y([cc.Label])],e.prototype,"userNames",void 0),e=n=o([h],e)}(cc.Component);n.default=b,cc._RF.pop()},{"../Connection/Connection":"Connection","../GameObject/MessageBar":"MessageBar","../Utility/Delay":"Delay","./Draft":"Draft","./ShowCard":"ShowCard"}],Timer:[function(t,e,n){"use strict";cc._RF.push(e,"17ed1uO7nFMC6iRLiYIOK7c","Timer");var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeLabel=null,e.targetTime=0,e.pastTime=0,e.timesUpResolve=null,e}return r(e,t),e.prototype.startCountDown=function(t){var e=this;return this.targetTime=t,this.enabled=!0,new Promise(function(t){e.timesUpResolve=t})},e.prototype.update=function(t){this.pastTime+=t,this.pastTime<this.targetTime?this.timeLabel.string=(this.targetTime-this.pastTime).toFixed():(this.timesUpResolve(),this.reset())},e.prototype.reset=function(){this.enabled=!1,this.targetTime=0,this.pastTime=0,this.timeLabel.string="0"},o([c(cc.Label)],e.prototype,"timeLabel",void 0),e=o([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{}]},{},["CardSlice","Connection","NetworkWebSocket","Card","CardSliceData","Pattern","CardData","LocationData","RoomData","InputDialog","MessageBar","Timer","Lobby","LoginPanel","RoomPanel","Draft","ShowCard","Table","Delay"]);